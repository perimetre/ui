"use strict";(self.webpackChunk_perimetre_ui=self.webpackChunk_perimetre_ui||[]).push([[4243],{"./src/components/DragFileUploadInput/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{o:()=>DragFileUploadInput});var esm_extends=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),free_solid_svg_icons=__webpack_require__("./node_modules/@fortawesome/free-solid-svg-icons/index.mjs"),index_es=__webpack_require__("./node_modules/@fortawesome/react-fontawesome/index.es.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),addMultipleEventListeners=function addMultipleEventListeners(element,events,listener,options){return events.forEach((function(event){return element.addEventListener(event,listener,options)}))},removeMultipleEventListeners=function removeMultipleEventListeners(element,events,listener,options){return events.forEach((function(event){return element.removeEventListener(event,listener,options)}))},Icons=__webpack_require__("./src/components/Icons/index.tsx"),defaultDragFileUploadTranslations={hasDragSupportDescription:"Click to upload or drag and drop here",noDragSupportDescription:"Click to upload",dropConfirm:"Drop to confirm",multipleFilesSelected:function multipleFilesSelected(count){return"".concat(count," files selected")},wrongFileType:"The provided file type is not allowed",bigFileSize:"File size is too big"},ImageLoader=__webpack_require__("./src/components/ImageLoader/index.tsx"),_excluded=["id","help","error","success","loading","onChange","accept","sizeInBytes","onError","onReset","translations","initialFilesDescription","containerClassName","previewSrc","previewClassName","previewLoaderClassName","hideFilesDescription"],__jsx=react.createElement;function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var DragFileUploadInput=(0,react.forwardRef)((function(_ref,ref){var id=_ref.id,help=_ref.help,errorProps=_ref.error,success=_ref.success,loading=_ref.loading,onChangeProps=_ref.onChange,accept=_ref.accept,sizeInBytes=_ref.sizeInBytes,onError=_ref.onError,onResetProps=_ref.onReset,translationsProps=_ref.translations,initialFilesDescription=_ref.initialFilesDescription,containerClassName=_ref.containerClassName,previewSrc=_ref.previewSrc,previewClassName=_ref.previewClassName,previewLoaderClassName=_ref.previewLoaderClassName,hideFilesDescription=_ref.hideFilesDescription,props=(0,objectWithoutProperties.Z)(_ref,_excluded),translations=(0,react.useMemo)((function(){return _objectSpread(_objectSpread({},defaultDragFileUploadTranslations),translationsProps)}),[]),_useState=(0,react.useState)(),hasDragSupport=_useState[0],setHasDragSupport=_useState[1],_useState2=(0,react.useState)(!1),isDragging=_useState2[0],setIsDragging=_useState2[1],_useState3=(0,react.useState)(initialFilesDescription),filesDescription=_useState3[0],setFilesDescription=_useState3[1],_useState4=(0,react.useState)(),error=_useState4[0],setError=_useState4[1],labelRef=(0,react.useRef)(null),inputRef=(0,react.useRef)(null),onReset=(0,react.useCallback)((function(){onResetProps&&onResetProps(),onChangeProps&&onChangeProps(void 0),setFilesDescription(void 0),setError(void 0),inputRef.current&&(inputRef.current.value="")}),[inputRef,onChangeProps,onResetProps]),onChange=(0,react.useCallback)((function(files){if(files&&files.length>0){var isFileTypeAccepted=!0;if(accept)for(var acceptOptions=accept.split(",").map((function(x){return x.trim()})),_loop=function _loop(index){if(!acceptOptions.some((function(option){return files[index].type===option})))return isFileTypeAccepted=!1,1},index=0;index<files.length&&!_loop(index);index++);if(isFileTypeAccepted){var fileSizeAccepted=!0;if(sizeInBytes)for(var _index=0;_index<files.length;_index++)if(files[_index].size>sizeInBytes){fileSizeAccepted=!1;break}fileSizeAccepted?(onChangeProps&&onChangeProps(files),setError(void 0),setFilesDescription(files.length>1?translations.multipleFilesSelected(files.length):files[0]?files[0].name:translations.multipleFilesSelected(1))):(setFilesDescription(void 0),inputRef.current&&(inputRef.current.value=""),setError("bigFileSize"),onError&&onError("bigFileSize"))}else setFilesDescription(void 0),inputRef.current&&(inputRef.current.value=""),setError("wrongFileType"),onError&&onError("wrongFileType")}else onReset()}),[accept,onChangeProps,onError,onReset,sizeInBytes,translations]),onInputChange=(0,react.useCallback)((function(event){onChange&&onChange(event.target.files)}),[onChange]);if((0,react.useEffect)((function(){var element=labelRef.current;if(element&&hasDragSupport){var prevent=function prevent(e){e.preventDefault(),e.stopPropagation()},onDragEnter=function onDragEnter(){setIsDragging(!0)},onDragLeave=function onDragLeave(){setIsDragging(!1)},onDragComplete=function onDragComplete(e){var _e$dataTransfer;onChange&&onChange(null===(_e$dataTransfer=e.dataTransfer)||void 0===_e$dataTransfer?void 0:_e$dataTransfer.files)};return addMultipleEventListeners(element,["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"],prevent,!1),addMultipleEventListeners(element,["dragover","dragenter"],onDragEnter,!1),addMultipleEventListeners(element,["dragleave","dragend","drop"],onDragLeave,!1),element.addEventListener("drop",onDragComplete,!1),function(){removeMultipleEventListeners(element,["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"],prevent),removeMultipleEventListeners(element,["dragover","dragenter"],onDragEnter),removeMultipleEventListeners(element,["dragleave","dragend","drop"],onDragLeave),element.removeEventListener("drop",onDragComplete)}}return void 0!==window&&element&&void 0===hasDragSupport&&setHasDragSupport("draggable"in element||"ondragstart"in element&&"ondrop"in element),function(){}}),[labelRef,hasDragSupport,onChange]),(0,react.useImperativeHandle)(ref,(function(){return{reset:onReset}}),[onReset]),previewSrc&&!previewLoaderClassName)throw new Error("DragFileUploadInput: You must provide a previewLoaderClassName when using previewSrc");return __jsx("div",{className:classnames_default()("pui-drag-file-container",containerClassName)},__jsx("div",{className:classnames_default()("relative h-full",{"pui-drag-file-error":!!error||errorProps,"pui-drag-file-success":success,"pui-drag-file-loading":loading,hideStatusIcon:error||!!filesDescription})},__jsx("label",{htmlFor:id,ref:labelRef,className:classnames_default()("pui-drag-file-label h-full",{disabled:props.disabled})},__jsx("div",{className:"pui-drag-file-content"},error?__jsx(react.Fragment,null,__jsx(Icons.AttentionIcon,{className:"w-6 h-6 text-pui-error"}),__jsx("p",{className:"pui-drag-file-text text-pui-error pui-animate-fadeIn"},translations[error])):filesDescription?__jsx(react.Fragment,null,previewSrc?__jsx(ImageLoader.S,{className:previewClassName,loaderClassName:previewLoaderClassName||"h-64 w-64",src:previewSrc,alt:filesDescription}):__jsx(index_es.G,{icon:free_solid_svg_icons.Y9i,className:"pui-animate-fadeIn",size:"2x"}),!hideFilesDescription&&__jsx("p",{className:"pui-drag-file-text pui-animate-fadeIn"},filesDescription)):hasDragSupport?isDragging?__jsx(react.Fragment,null,__jsx(index_es.G,{icon:free_solid_svg_icons.CvE,className:"pui-animate-scaleHover-target pui-animate-fadeIn",size:"2x"}),__jsx("p",{className:"pui-drag-file-text pui-animate-fadeIn"},translations.dropConfirm)):__jsx(react.Fragment,null,__jsx(index_es.G,{icon:free_solid_svg_icons.cf$,className:"pui-animate-scaleHover-target pui-animate-fadeIn",size:"2x"}),__jsx("p",{className:"pui-drag-file-text pui-animate-fadeIn"},translations.hasDragSupportDescription)):__jsx(react.Fragment,null,__jsx(index_es.G,{icon:free_solid_svg_icons.cf$,className:"pui-animate-scaleHover-target pui-animate-fadeIn",size:"2x"}),__jsx("p",{className:"pui-drag-file-text pui-animate-fadeIn"},translations.noDragSupportDescription)))),__jsx("input",(0,esm_extends.Z)({ref:inputRef,id,type:"file",accept,onChange:onInputChange},props,{className:"pui-drag-file-input"})),!props.disabled&&(filesDescription||error)&&__jsx("button",{type:"button",className:classnames_default()("pui-drag-file-close-icon",{"text-pui-paragraph-500":!error,"text-pui-error":!!error}),onClick:onReset},__jsx(Icons.CrossIcon,{className:"h-6 w-6 pui-animate-scaleHover-target"}))),help&&!errorProps&&__jsx("p",{className:"pui-help-text-input"},help),errorProps&&__jsx("p",{className:"pui-animate-fadeDown pui-help-text-input text-pui-error"},errorProps))}));DragFileUploadInput.__docgenInfo={description:"",methods:[],displayName:"DragFileUploadInput",props:{id:{required:!0,tsType:{name:"string"},description:"The input id"},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(files?: FileList | null) => void",signature:{arguments:[{name:"files",type:{name:"union",raw:"FileList | null",elements:[{name:"FileList"},{name:"null"}]}}],return:{name:"void"}}},description:"The handler for when one or more files are selected"},onError:{required:!1,tsType:{name:"signature",type:"function",raw:"(error: 'bigFileSize' | 'wrongFileType') => void",signature:{arguments:[{name:"error",type:{name:"union",raw:"'bigFileSize' | 'wrongFileType'",elements:[{name:"literal",value:"'bigFileSize'"},{name:"literal",value:"'wrongFileType'"}]}}],return:{name:"void"}}},description:"The handler for when an invalid file is selected"},onReset:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"The handler for when the content is cleared"},sizeInBytes:{required:!1,tsType:{name:"number"},description:"The maximum allowed size for the file(in bytes).\n\n1kb = 1024"},help:{required:!1,tsType:{name:"string"},description:"If provided, displays a help text under the input"},error:{required:!1,tsType:{name:"string"},description:"The error text to replace the help text with"},success:{required:!1,tsType:{name:"boolean"},description:"Shows a success status"},loading:{required:!1,tsType:{name:"boolean"},description:"Shows a loading status"},translations:{required:!1,tsType:{name:"DragFileUploadTranslations"},description:"The translation object"},initialFilesDescription:{required:!1,tsType:{name:"string"},description:"The initial description to show in the input when it is loaded"},containerClassName:{required:!1,tsType:{name:"string"},description:"The class used for the container that wraps the input"},previewSrc:{required:!1,tsType:{name:"string"},description:"The SRC content used to preview the file"},previewClassName:{required:!1,tsType:{name:"string"},description:"Classname for the preview image"},previewLoaderClassName:{required:!1,tsType:{name:"string"},description:"Classname for the preview image loader"},hideFilesDescription:{required:!1,tsType:{name:"boolean"},description:"Whether or not to hide the file description text"}}};try{DragFileUploadInput.displayName="DragFileUploadInput",DragFileUploadInput.__docgenInfo={description:"",displayName:"DragFileUploadInput",props:{id:{defaultValue:null,description:"The input id",name:"id",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"The handler for when one or more files are selected",name:"onChange",required:!1,type:{name:"((files?: FileList | null) => void)"}},sizeInBytes:{defaultValue:null,description:"The maximum allowed size for the file(in bytes).\n\n1kb = 1024",name:"sizeInBytes",required:!1,type:{name:"number"}},help:{defaultValue:null,description:"If provided, displays a help text under the input",name:"help",required:!1,type:{name:"string"}},error:{defaultValue:null,description:"The error text to replace the help text with",name:"error",required:!1,type:{name:"string"}},success:{defaultValue:null,description:"Shows a success status",name:"success",required:!1,type:{name:"boolean"}},loading:{defaultValue:null,description:"Shows a loading status",name:"loading",required:!1,type:{name:"boolean"}},translations:{defaultValue:null,description:"The translation object",name:"translations",required:!1,type:{name:"{ hasDragSupportDescription: string; noDragSupportDescription: string; dropConfirm: string; multipleFilesSelected: (count: number) => string; wrongFileType: string; bigFileSize: string; }"}},initialFilesDescription:{defaultValue:null,description:"The initial description to show in the input when it is loaded",name:"initialFilesDescription",required:!1,type:{name:"string"}},containerClassName:{defaultValue:null,description:"The class used for the container that wraps the input",name:"containerClassName",required:!1,type:{name:"string"}},previewSrc:{defaultValue:null,description:"The SRC content used to preview the file",name:"previewSrc",required:!1,type:{name:"string"}},previewClassName:{defaultValue:null,description:"Classname for the preview image",name:"previewClassName",required:!1,type:{name:"string"}},previewLoaderClassName:{defaultValue:null,description:"Classname for the preview image loader",name:"previewLoaderClassName",required:!1,type:{name:"string"}},hideFilesDescription:{defaultValue:null,description:"Whether or not to hide the file description text",name:"hideFilesDescription",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/DragFileUploadInput/index.tsx#DragFileUploadInput"]={docgenInfo:DragFileUploadInput.__docgenInfo,name:"DragFileUploadInput",path:"src/components/DragFileUploadInput/index.tsx#DragFileUploadInput"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/ImageLoader/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{S:()=>ImageLoader});var _home_runner_work_ui_ui_node_modules_babel_runtime_helpers_esm_extends_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),_home_runner_work_ui_ui_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_home_runner_work_ui_ui_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),classnames__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_excluded=["src","observerOptions","loaderClassName","containerClassName"],__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement;function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}var ImageLoader=function ImageLoader(_ref){var src=_ref.src,observerOptions=_ref.observerOptions,loaderClassName=_ref.loaderClassName,containerClassName=_ref.containerClassName,props=(0,_home_runner_work_ui_ui_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_3__.Z)(_ref,_excluded),imgRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),_useState=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),imgLoaded=_useState[0],setImgLoaded=_useState[1];return(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((function(){var img=imgRef.current;if(img){var observer=new IntersectionObserver((function(){img.onload=function(){return setImgLoaded(!0)},img.src=src||""}),function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,_home_runner_work_ui_ui_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_1__.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({threshold:.2},observerOptions));return observer.observe(img),function(){observer.unobserve(img),observer.disconnect()}}}),[imgRef,src]),__jsx("span",{className:containerClassName},!imgLoaded&&__jsx("div",{className:classnames__WEBPACK_IMPORTED_MODULE_2___default()("pui-skeleton",loaderClassName)}),__jsx("img",(0,_home_runner_work_ui_ui_node_modules_babel_runtime_helpers_esm_extends_js__WEBPACK_IMPORTED_MODULE_4__.Z)({style:{display:imgLoaded?void 0:"none"},ref:imgRef},props)))};ImageLoader.displayName="ImageLoader",ImageLoader.__docgenInfo={description:"Wraps the image tag with a loader placeholder that shows up until the image is loaded\n@param props The image props\n@param props.src The image src tag\n@param props.observerOptions The options for the intersection observer\n@param props.loaderClassName The class name for the loader\n@param props.containerClassName The class name for the container",methods:[],displayName:"ImageLoader"};try{ImageLoader.displayName="ImageLoader",ImageLoader.__docgenInfo={description:"Wraps the image tag with a loader placeholder that shows up until the image is loaded",displayName:"ImageLoader",props:{loaderClassName:{defaultValue:null,description:"Class name for the loader",name:"loaderClassName",required:!0,type:{name:"string"}},containerClassName:{defaultValue:null,description:"Class name for the container",name:"containerClassName",required:!1,type:{name:"string"}},observerOptions:{defaultValue:null,description:"Options for the intersection observer",name:"observerOptions",required:!1,type:{name:"IntersectionObserverInit"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ImageLoader/index.tsx#ImageLoader"]={docgenInfo:ImageLoader.__docgenInfo,name:"ImageLoader",path:"src/components/ImageLoader/index.tsx#ImageLoader"})}catch(__react_docgen_typescript_loader_error){}}}]);